apply plugin: 'java'
apply plugin: 'groovy'
apply plugin: 'hamcrest'

sourceCompatibility = 1.6

task wrapper(type: Wrapper) {
    gradleVersion = '1.0-milestone-6'
}

task trigger<<{
    def sourcePaths = sourceSets*.java.srcDirs.flatten().join(',')
    def destinationDir = new File(buildDir, 'generated-src')
    destinationDir.mkdirs()
    def configurationFile = new File("file-matchers.xml");

//    println configurationFile.absolutePath
//    println sourcePaths
//    println "com.github.signed.matcher.file.FileMatchers"
//    println destinationDir.absolutePath
//
//    String [] args = [
//            configurationFile.absolutePath
//          , sourcePaths
//          , "com.github.signed.matcher.file.FileMatchers"
//          , destinationDir.absolutePath
//          ].toArray()
//    XmlConfigurator.main(args);
}
trigger.onlyIf { false }

dependencies {
    groovy(
            ['org.codehaus.groovy:groovy:1.8.3']
    )
    compile(
            ['org.hamcrest:hamcrest-generator:1.3.RC2']
          , ['org.hamcrest:hamcrest-core:1.3.RC2']
    )
    testCompile(
            ['junit:junit-dep:4.10']
          , ['org.spockframework:spock-core:0.5-groovy-1.8']
          , ['org.mockito:mockito-core:1.9.0-rc1']
    )
}
